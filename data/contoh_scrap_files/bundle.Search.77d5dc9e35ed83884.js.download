webpackJsonp(["bundle.Search"],{"/I9H":function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,n("n12u");var r=c(n("x5lS")),a=c(n("GiK3")),o=c(n("sT3W"));function c(e){return e&&e.__esModule?e:{default:e}}var i=function(e){return void 0===e&&(e={}),(0,r.default)("svg",Object.assign({},e,{style:[o.default.root,e.style],viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M16 11.25h-3.25V8c0-.414-.336-.75-.75-.75s-.75.336-.75.75v3.25H8c-.414 0-.75.336-.75.75s.336.75.75.75h3.25V16c0 .414.336.75.75.75s.75-.336.75-.75v-3.25H16c.414 0 .75-.336.75-.75s-.336-.75-.75-.75z"}),a.default.createElement("path",{d:"M12 22.75C6.072 22.75 1.25 17.928 1.25 12S6.072 1.25 12 1.25 22.75 6.072 22.75 12 17.928 22.75 12 22.75zm0-20C6.9 2.75 2.75 6.9 2.75 12S6.9 21.25 12 21.25s9.25-4.15 9.25-9.25S17.1 2.75 12 2.75z"})))};i.metadata={height:24,width:24};var s=i;t.default=s},"5r58":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r,a=n("d39v"),o=n("Q7lt"),c=((r={})[a.a.GenericForbidden]={toast:Object(o.a)()},r.showToast=!0,r)},"7YPs":function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,n("n12u");var r=c(n("x5lS")),a=c(n("GiK3")),o=c(n("sT3W"));function c(e){return e&&e.__esModule?e:{default:e}}var i=function(e){return void 0===e&&(e={}),(0,r.default)("svg",Object.assign({},e,{style:[o.default.root,e.style],viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M2 7.75h9.326c.356 1.986 2.087 3.5 4.174 3.5s3.818-1.514 4.174-3.5H22c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-2.326c-.356-1.986-2.087-3.5-4.174-3.5s-3.818 1.514-4.174 3.5H2c-.414 0-.75.336-.75.75s.336.75.75.75zm13.5-3.5c1.517 0 2.75 1.233 2.75 2.75s-1.233 2.75-2.75 2.75S12.75 8.517 12.75 7s1.233-2.75 2.75-2.75zm6.5 12h-9.326c-.356-1.986-2.087-3.5-4.174-3.5s-3.818 1.514-4.174 3.5H2c-.414 0-.75.336-.75.75s.336.75.75.75h2.326c.356 1.986 2.087 3.5 4.174 3.5s3.818-1.514 4.174-3.5H22c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm-13.5 3.5c-1.517 0-2.75-1.233-2.75-2.75s1.233-2.75 2.75-2.75 2.75 1.233 2.75 2.75-1.233 2.75-2.75 2.75z"})))};i.metadata={height:24,width:24};var s=i;t.default=s},CZRV:function(e,t,n){"use strict";var r=n("GiK3"),a=(n.n(r),n("9w+k")),o=n("jH3T"),c=n.n(o),i=c.a.b08b6c00,s=c.a.af6a2c4a,u=c.a.h74cf577;t.a=function(e){var t=e.onCancel,n=e.onConfirm;return r.createElement(a.a,{confirmButtonLabel:u,confirmButtonType:"destructive",headline:i,onCancel:t,onConfirm:n,text:s})}},Imk4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("lt8z"),a=n.n(r),o=(n("VjuZ"),n("86MP")),c=n.n(o),i=n("GiK3"),s=n("7t5w"),u=n("Z1LJ"),l={scribeAction:s.c},d=Object(u.a)(l),h=n("bgPG"),p=n("eB+D"),f=n("jH3T"),m=n.n(f),v=n("IIZ1"),y=n("oXK/");n.d(t,"SearchFiltersScreen",function(){return S});var b=m.a.f12ed169,S=function(e){function t(t){var n,r=(n=e.call(this,t)||this).props,a=r.history,o=r.location;return Object(v.isEmpty)(o.query)&&a.replace("/explore"),n}return c()(t,e),t.prototype.render=function(){var e=this.props,t=e.history,n=e.location;return i.createElement(p.b,{documentTitle:b,history:t,location:n,title:b},i.createElement(y.a,a()({},this.props,{key:n.key,withBottomBorder:!0})))},t}(i.Component);t.default=Object(h.d)({page:"search_filters"})(d(S))},"W+T8":function(e,t,n){"use strict";n.d(t,"d",function(){return S}),n.d(t,"c",function(){return g}),n.d(t,"a",function(){return _}),n.d(t,"b",function(){return E});var r,a=n("y9m4"),o=(n.n(a),n("gYYG")),c=(n.n(o),n("rzQm")),i=n.n(c),s=n("n12u"),u=(n.n(s),n("zAiL")),l=n("ipg4"),d=n("y7g/"),h=n("IIth"),p="rweb/savedSearches",f={fetchStatus:u.a.NONE,savedSearches:[]},m=Object(h.a)(p,"FETCH_SAVED_SEARCHES"),v=Object(h.a)(p,"SAVE_SEARCH"),y=Object(h.a)(p,"DELETE_SAVED_SEARCH");function b(e,t){switch(void 0===e&&(e=f),t.type){case m.SUCCESS:return Object.assign({},e,{fetchStatus:u.a.LOADED,savedSearches:t.payload});case m.FAILURE:return Object.assign({},e,{fetchStatus:u.a.FAILED});case v.SUCCESS:return Object.assign({},e,{savedSearches:[].concat(i()(e.savedSearches),[t.payload])});case y.SUCCESS:return Object.assign({},e,{savedSearches:e.savedSearches.filter(function(e){return e.id_str!==t.payload.id_str})});default:return e}}l.a.register(((r={}).savedSearches=b,r));var S=function(e){return e.savedSearches.savedSearches},g=function(e){return function(t,n,r){var a=r.api;return Object(h.b)(t,{request:a.SavedSearches.create,params:{query:e}})({actionTypes:v,context:"SAVE_SEARCH"})}},_=function(e){return function(t,n,r){var a=r.api;return Object(h.b)(t,{request:a.SavedSearches.destroy,params:{id:e}})({actionTypes:y,context:"DELETE_SAVED_SEARCH"})}},E=function(){return function(e,t,n){n.api;var r=t();return Object(d.e)(r)?function(e){return e.savedSearches.fetchStatus}(r)===u.a.LOADED?Promise.resolve():e(function(e,t,n){var r=n.api;return Object(h.b)(e,{request:r.SavedSearches.fetch,params:{}})({actionTypes:m,context:"FETCH_SAVED_SEARCHES"})}):Promise.resolve()}}},hBfX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=[],n=(0,o.default)(e),r=0;r<n.length;r++)t.push(n[r].hashtag);return t};var r,a=n("B8jw"),o=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},mJzx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return!1;var t=(0,o.default)(e);return 1===t.length&&t[0]===e.slice(1)};var r,a=n("hBfX"),o=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},nsKi:function(e,t,n){"use strict";var r,a,o=n("M1I4"),c=n.n(o),i=n("86MP"),s=n.n(i),u=n("fKPv"),l=n.n(u),d=n("GiK3"),h=(n("n12u"),n("piG7")),p=n("IIZ1"),f=n("Ekgy"),m=n("qCVd"),v=n("UU9K"),y=n("qv63"),b=n("sOAE"),S=n("ToAv"),g=n("aUq8"),_=(n("UJiG"),n("C3D3")),E=n("Mpbj"),C=n.n(E),O=n("H/mk"),q=n.n(O),j=n("jYKd"),w=n.n(j),T=function(e){function t(){return e.apply(this,arguments)||this}return s()(t,e),t.prototype.render=function(){var e=this.props.searchTerm,t={pathname:"/search",query:{q:e,src:_.a.RelatedQueryClick}};return d.createElement(q.a,{link:t,style:x.link},d.createElement(C.a,null,e))},t}(d.PureComponent),x=w.a.create(function(e){return{link:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical}}}),k=T,A=n("7t5w"),M=(n("VTn2"),Object.freeze({Expand:"Expand",Replace:"Replace",Suggest:"Suggest"})),F=n("G0MX"),I=n("MjES"),P=n.n(I),L=n("jH3T"),B=n.n(L),R=B.a.g02965bb,D=B.a.e2e036ac,H=function(e){return d.createElement(C.a,{weight:"bold"},e)},N=function(e){function t(){return e.apply(this,arguments)||this}return s()(t,e),t.prototype.render=function(){var e=this.props.suggestion,t={pathname:"/search",query:{q:e,src:_.a.SpellingSuggestionClick}};return d.createElement(C.a,{link:t,style:G.root},d.createElement(B.a.I18NFormatMessage,{$i18n:"c4890b6b"},H(e)))},t}(d.PureComponent),V=function(e){function t(){return e.apply(this,arguments)||this}return s()(t,e),t.prototype.render=function(){var e=this.props,t=e.onClick,n=e.original,r=e.suggestion,a={pathname:"/search",query:{q:r,src:_.a.SpellingCorrectionClick}};return d.createElement(P.a,{style:G.root},d.createElement(C.a,{weight:"bold"},D({suggestion:r})),d.createElement(C.a,{link:a,onClick:t},d.createElement(B.a.I18NFormatMessage,{$i18n:"b2ec5813"},H(n))))},t}(d.PureComponent),K=function(e){function t(){return e.apply(this,arguments)||this}return s()(t,e),t.prototype.render=function(){var e=this.props,t=e.onClick,n=e.original,r=e.suggestion,a={pathname:"/search",query:{q:n,src:_.a.SpellingExpansionRevertClick}};return d.createElement(P.a,{style:G.root},d.createElement(C.a,{weight:"bold"},R({suggestion:r})),d.createElement(C.a,{link:a,onClick:t},d.createElement(B.a.I18NFormatMessage,{$i18n:"b2ec5813"},H(n))))},t}(d.PureComponent),G=w.a.create(function(e){return{root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical}}}),z=function(e){return function(t){return{item_type:F.a.ItemType.SEARCH,name:"spelling_"+e,description:t.content.spellingResult.text,position:0}}},U=function(e){return{items:[{search_details:{query:e.content.originalQuery},query_details:{query_item:e.content.spellingResult.text}}]}},Q=((a={})[m.a.News]=S.a,a[m.a.EventSummary]=v.a,a[m.a.RelatedSearch]=h.d(h.f({component:k,selectData:Object(p.constant)({}),createProps:function(e){return{searchTerm:e.entry.content.relatedSearch.text}}})),a[m.a.Prompt]=g.a,a[m.a.FollowSearch]=h.d(h.a()),a[m.a.FollowSearchAction]=h.d(h.a()),a[m.a.Place]=h.d(h.a()),a[m.a.Message]=y.a,a[m.a.MomentAnnotation]=b.a,a[m.a.Spelling]=h.b({selectDisplayType:function(e){return e.content.spellingAction},handlers:(r={},r[M.Expand]=h.f({bindActions:function(){return{scribe:A.c}},component:K,divider:{top:!0,bottom:!0},getDataForStreamImpression:z("expansion"),selectData:Object(p.constant)({}),createProps:function(e){var t=e.entry,n=e.actions.scribe,r=e.scribeNamespace,a=t.content;return{onClick:function(){return n(Object.assign({},r,{element:"expansion_revert",action:"search"}),U(t))},original:a.originalQuery,suggestion:a.spellingResult.text}}}),r[M.Replace]=h.f({bindActions:function(){return{scribe:A.c}},component:V,divider:{top:!0,bottom:!0},getDataForStreamImpression:z("replacement"),selectData:Object(p.constant)({}),createProps:function(e){var t=e.entry,n=e.actions.scribe,r=e.scribeNamespace,a=t.content;return{onClick:function(){return n(Object.assign({},r,{element:"replacement_revert",action:"search"}),U(t))},original:a.originalQuery,suggestion:a.spellingResult.text}}}),r[M.Suggest]=h.f({component:N,divider:{top:!0,bottom:!0},getDataForStreamImpression:z("suggestion"),selectData:Object(p.constant)({}),createProps:function(e){return{suggestion:e.entry.content.spellingResult.text}}}),r)}),a),W=Object.assign({},Object(f.a)({tweetDismissable:!0,displayBlocked:!0}),{},Q),J=n("5r58"),Z=n("Ak8F"),Y=n("omV+"),X=n("nsSd"),$=n("Wied"),ee=n.n($),te=n("vPGK"),ne=n.n(te),re=(n("KSGD"),B.a.e1c1c889),ae=B.a.ebb2b7a5,oe=B.a.cc36cfaa,ce=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,l()(c()(t),"_getModule",ee()(c()(t),function(e){return e.query},function(e){return e.querySrc},function(e){return e.searchMode},function(e){return e.searchFilters},function(e){return e.vertical},function(e,t,n,r,a){return Object(X.b)({query:e,searchMode:n,querySource:t,searchFilters:r,vertical:a})})),l()(c()(t),"_renderEmptyTimeline",function(){var e=t.props.emptyResultsMessage;return d.createElement(ne.a,{header:oe,message:e||ae})}),t}return s()(t,e),t.prototype.render=function(){return d.createElement(Y.a,{apiErrorHandlerMap:J.a,entryConfiguration:W,fetchOptions:this.props.fetchOptions,module:this._getModule(),refreshControl:Z.a,renderEmptyState:this._renderEmptyTimeline,title:re})},t}(d.Component);t.a=ce},nsSd:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r,a=n("n12u"),o=(n.n(a),n("gbyG")),c=(n.n(o),n("Gh7F")),i=(n.n(c),n("C3D3")),s=n("kOX1"),u=n("aHWw"),l=n("KD+K"),d=((r={})[s.c.Top]={},r[s.c.Live]={tweet_search_mode:s.c.Live},r[s.c.User]={result_filter:s.c.User},r[s.c.Image]={result_filter:s.c.Image},r[s.c.Video]={result_filter:s.c.Video},r),h=function(e){return function(e){return e===i.a.SpellingCorrectionRevertClick||e===i.a.SpellingExpansionRevertClick}(e)?"-revert":""},p=function(){return function(e,t){e(Object(l.m)(t()).filter(function(e){return 0===e.indexOf("search-")}).map(function(e){return Object(l.d)(e)}))}};t.b=function(e){var t=e.query,n=e.searchMode,r=void 0===n?s.c.Top:n,a=e.querySource,o=e.searchFilters,c=e.vertical,i=h(a),l=o&&o.peopleFilter?"searcher_follows":void 0,p=l?"-pf":"",f=o&&o.locationFilter&&!t.includes(" near:me")?t+" near:me":t,m="search-"+f+"-"+r+i+p;return Object(u.a)({timelineId:m,getEndpoint:function(e){return e.URT.fetchSearch},getEndpointParams:function(e){return Object.assign({q:f,social_filter:l,vertical:c},d[r],{},e)},context:"FETCH_SEARCH_TIMELINE",perfKey:"search",staleIntervalMs:r===s.c.Live?5e3:void 0})}},"oXK/":function(e,t,n){"use strict";n("SU+a"),n("gbyG"),n("Gh7F"),n("VjuZ"),n("n12u"),n("EuXz");var r=n("M1I4"),a=n.n(r),o=n("86MP"),c=n.n(o),i=n("fKPv"),s=n.n(i),u=n("GiK3"),l=n("jH3T"),d=n.n(l),h=n("A1lE"),p=n("bwKB"),f=n("IIZ1"),m=(n("VTn2"),Object.freeze({People:"People",Location:"Location"})),v=n("MjES"),y=n.n(v),b=n("qVtP"),S=n.n(b),g=n("ECcg"),_=n.n(g),E=n("jYKd"),C=n.n(E),O=d.a.d889fe84,q=d.a.h5ac2647,j=d.a.b852bac5,w=d.a.e65d7b68,T=d.a.bfe77df7,x=d.a.a663ca67,k=d.a.j3fd0f5f,A="anyone",M="youFollow",F="anywhere",I="nearYou",P=[{label:q,name:m.People,options:[{label:j,value:A},{label:w,value:M}]},{label:T,name:m.Location,options:[{label:x,value:F},{label:k,value:I}]}],L=function(e){function t(t,n){var r;r=e.call(this,t,n)||this,s()(a()(r),"_renderFilters",function(){return P.map(function(e,t){return u.createElement(y.a,{key:e.name,style:t>0&&B.paddingTop},u.createElement(_.a,{label:e.label,name:e.name,onChange:r._handleFilterChange,options:e.options,value:r._getCurrentValue(e.name)}))})}),s()(a()(r),"_getCurrentValue",function(e){switch(e){case m.People:return r.state.peopleFilter;case m.Location:return r.state.locationFilter;default:return""}}),s()(a()(r),"_handleFilterChange",function(e,t){var n=r.context.loggedInUserId,a=r.props.location.query;switch(e){case m.People:if(n){r.setState({peopleFilter:t});var o=t===M?"on":void 0,c=Object.assign({},a,{pf:o});r._executeSearch(c,"people")}else r.setState({shouldShowLoginSheet:!0});break;case m.Location:r.setState({locationFilter:t});var i=t===I?"on":void 0,s=Object.assign({},a,{lf:i});r._executeSearch(s,"location")}}),s()(a()(r),"_getAdvancedSearchLink",function(){var e=r.props.location;return{pathname:"/search-advanced",query:Object.assign({},Object(f.omit)(e.query,["q","src"]))}}),s()(a()(r),"_handleFooterPress",function(){r._scribeAction("advanced_search")}),s()(a()(r),"_scribeAction",function(e){var t=r.props,n=t.scribeAction,a=t.scribeNamespace;n(Object.assign({},a,{component:"search_filters",element:e,action:"click"}))}),s()(a()(r),"_executeSearch",function(e,t){var n=r.props.history;r._scribeAction(t);var a=r._getPathname();n.replace({pathname:a,query:Object(f.pickBy)(e)})}),s()(a()(r),"_getPathname",function(){var e=r.props.location;if(e.pathname.includes("/hashtag/"))return e.pathname;if(e.state&&e.state.previousPath&&e.state.previousPath.includes("/hashtag/")&&"/search"!==e.pathname){var t=e.state.previousPath,n=t.indexOf("?")>-1?t.indexOf("?"):t.length-1;return t.substring(0,n)}return"/search"}),s()(a()(r),"_handleHideLoginSheet",function(){r.setState({shouldShowLoginSheet:!1})});var o=r.context.loggedInUserId,c=t.location.query,i=o&&c&&c.pf?M:A,l=c&&c.lf?I:F;return r.state={peopleFilter:i,locationFilter:l,shouldShowLoginSheet:!1},r}c()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.scribeAction,n=e.scribeNamespace;t(Object.assign({},n,{component:"search_filters",action:"impression"}))},n.render=function(){var e=this.props.withBottomBorder,t=this.state.shouldShowLoginSheet;return u.createElement(y.a,null,u.createElement(y.a,{style:B.content},this._renderFilters()),u.createElement(y.a,{style:[B.footer,e&&B.bottomBorder]},u.createElement(S.a,{link:this._getAdvancedSearchLink(),onPress:this._handleFooterPress,text:O})),t?u.createElement(p.a,{onClose:this._handleHideLoginSheet}):null)},t}(u.Component);s()(L,"contextType",h.a),s()(L,"defaultProps",{withBottomBorder:!1});var B=C.a.create(function(e){return{content:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingBottom:e.spaces.small},footer:{borderTopColor:e.colors.fadedGray,borderTopStyle:"solid",borderTopWidth:e.borderWidths.small},bottomBorder:{borderBottomColor:e.colors.fadedGray,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small},paddingTop:{paddingTop:e.spaces.xxSmall}}});t.a=L},oxIx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("VjuZ"),n("UJiG"),n("WpTh"),n("n12u");var r=n("M1I4"),a=n.n(r),o=n("86MP"),c=n.n(o),i=n("fKPv"),s=n.n(i),u=n("GiK3"),l=n("/GoK"),d=n("qrhJ"),h=n("BkKE"),p=(n("fx22"),n("WgSQ"),n("gYYG"),n("tJwI"),n("MfeA"),n("7t5w")),f=n("Z1LJ"),m=n("sLaq"),v=n("bndy"),y=n("LJB1"),b=n("kOX1"),S=n("W+T8"),g=function(e,t){var n=t.location,r=t.match.params;return r&&r.hashtagQuery&&"string"==typeof r.hashtagQuery?"#"+r.hashtagQuery:n&&n.query&&n.query.q&&Object(y.a)(n.query.q)||""},_=Object(v.createSelector)(g,S.d,function(e,t){return t.map(function(e){return e.query}).indexOf(e)>-1}),E=Object(v.createSelector)(function(e,t){return t.location},function(e){return{peopleFilter:e.query&&Object(y.a)(e.query.pf),locationFilter:e.query&&Object(y.a)(e.query.lf)}}),C=Object(v.createSelector)(function(e,t){return!!(t.location.state||{}).searchFocused},g,function(e,t){var n=t.location;return n.query&&n.query.src&&"string"==typeof n.query.src?n.query.src:""},_,function(e,t){return 0===t.location.pathname.indexOf("/search")?"search":"hashtag"},E,function(e,t){var n=t.location,r=n.query&&Object(y.a)(n.query.f),a=r&&Object.keys(b.c).find(function(e){return b.c[e]===r});return a?b.c[a]:void 0},S.d,function(e,t,n,r,a,o,c,i){return{searchFocused:e,query:t,querySrc:n,isQueryAlreadySaved:r,searchType:a,searchFilters:o,mode:c,savedSearches:i}}),O={createLocalApiErrorHandler:Object(m.b)("SEARCH_SCREEN"),deleteSavedSearch:S.a,fetchSavedSearchesIfNeeded:S.b,saveSearch:S.c,scribeAction:p.c},q=Object(f.f)(C,O),j=n("CZRV"),w=n("jH3T"),T=n.n(w),x=n("A1lE"),k=n("CH9e"),A=n("f6lj"),M=n("O27J"),F=n.n(M),I=n("WgQH"),P=n("oXK/"),L=n("dOZT"),B=n("7YPs"),R=n.n(B),D=n("/I9H"),H=n.n(D),N=n("/YPJ"),V=n.n(N),K=n("4yFr"),G=n.n(K),z=n("zSBy"),U=n.n(z),Q=n("IIZ1"),W=T.a.f92fe4b7,J=T.a.f12ed169,Z=T.a.d889fe84,Y=T.a.aa960b84,X=T.a.bb26bb6c,$=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,s()(a()(t),"_getActionItems",function(){var e=t.props,n=e.deleteSavedSearch,r=e.isLoggedIn,a=e.isTwoColumn,o=e.isQueryAlreadySaved,c=e.location,i=e.saveSearch,s=[];return a||s.push({Icon:R.a,text:J,link:{pathname:"/i/search_filters",query:c.query}}),s.push({Icon:V.a,text:Z,link:{pathname:"/search-advanced",query:Object.assign({},Object(Q.omit)(c.query,["q","src"]))}}),r&&(s.unshift({Icon:G.a,text:W,link:"/settings/search"}),o?s.push({Icon:U.a,isEmphasized:!0,text:X,onClick:function(e){e(),n()}}):s.push({Icon:H.a,text:Y,onClick:function(e){e(),i()}})),s}),t}return c()(t,e),t.prototype.render=function(){return u.createElement(L.a,{items:this._getActionItems(),onCloseRequested:this.props.onClose})},t}(u.Component),ee=n("9uNJ"),te=n("VZMR"),ne=n("c6pc"),re=(n("uwYN"),n("7q6/")),ae=n("MjES"),oe=n.n(ae),ce=(n("KSGD"),n("bgPG")),ie=n("Wied"),se=n.n(ie),ue=n("wJuL"),le=n.n(ue),de=n("Xwuh"),he=n.n(de),pe=n("jYKd"),fe=n.n(pe),me=n("3wTJ"),ve=Object(v.createSelector)(function(e,t){var n=t.location,r=n&&n.query||{},a=r.pt,o=r.event_id,c=a&&Object(y.a)(a);return o&&Object(y.a)(o)||c&&"tweet:"+c},function(e,t){return"POP"===t.history.action},function(e,t){var n=t.location,r=n.query&&Object(y.a)(n.query.f),a=r&&Object.keys(b.c).find(function(e){return b.c[e]===r});return a&&b.c[a]||b.c.Top},function(e,t){var n=t.location;return n.query&&Object(y.a)(n.query.vertical)},function(e,t,n,r){return{dataLookupId:e,isBackNavigation:t,searchMode:n,vertical:r}}),ye={clearTimelineCache:function(e){var t=e.module,n=e.fetchOptions;return Object(me.a)(t,n)},createLocalApiErrorHandler:Object(m.b)("SEARCH_RESULTS_SCREEN"),googleAnalyticsPageView:p.a,scribePageImpression:p.d},be=Object(f.f)(ve,ye),Se=n("mv1E"),ge=n("2vbk"),_e=n("5r58"),Ee=n("z1RL"),Ce=n("mJzx"),Oe=n.n(Ce),qe=n("nsKi"),je=n("nsSd"),we=n("sgb3"),Te=n.n(we),xe=function(e){return e&&Oe()(e)?{defaultText:" "+e,positionCursorAtBeginning:!0}:void 0},ke=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,s()(a()(t),"_getFabState",function(){var e=t.props.query;return xe(e)}),s()(a()(t),"_getTimelineScribeNamespace",se()(a()(t),function(e){return e.scribeNamespace},function(e){return e.searchMode},function(e,t){return Object.assign({},e,{section:"search_filter_"+t})})),s()(a()(t),"_getFetchOptions",se()(a()(t),function(e){return e.querySrc},function(e){return e.dataLookupId},function(e,t){return{query_source:e,data_lookup_id:t}})),t}c()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.googleAnalyticsPageView,n=e.isBackNavigation;(0,e.scribePageImpression)(this._getTimelineScribeNamespace()),t(this._getTimelineScribeNamespace()),n||this._clearTimelineCache()},n.componentDidUpdate=function(e){var t=this.props,n=t.isBackNavigation,r=t.query,a=t.querySrc,o=t.searchFilters;n||e.query===r&&e.querySrc===a&&Te()(e.searchFilters,o)||this._clearTimelineCache()},n.render=function(){var e=this.props,t=e.emptyResultsMessage,n=e.searchFocused,r=e.query,a=e.searchFilters,o=e.querySrc,c=e.searchMode,i=e.vertical;return u.createElement(ge.a,{component:Se.a,fab:this._renderFloatingComposeButton(),shouldRenderFab:!n},u.createElement(ce.c,{namespace:this._getTimelineScribeNamespace()},u.createElement(qe.a,{emptyResultsMessage:t,fetchOptions:this._getFetchOptions(),query:r,querySrc:o,searchFilters:a,searchMode:c,vertical:i})))},n._renderFloatingComposeButton=function(){var e=this.props.history;return u.createElement(Ee.a,{getLocationState:this._getFabState,history:e})},n._clearTimelineCache=function(){var e=this.props,t=e.clearTimelineCache,n=e.createLocalApiErrorHandler,r=e.query,a=e.querySrc,o=e.searchMode,c=e.searchFilters;t({module:Object(je.b)({query:r,querySource:a,searchMode:o,searchFilters:c}),fetchOptions:this._getFetchOptions()}).catch(n(_e.a))},t}(u.Component);s()(ke,"contextType",x.a);var Ae,Me=Object(ce.d)({page:"search",section:"universal"})(be(ke));n.d(t,"SearchScreen",function(){return We});var Fe=T.a.f86f6f65,Ie=T.a.ac267cf2,Pe=T.a.f14bdbff,Le=T.a.c4002702,Be=T.a.h5ac2647,Re=T.a.d37ce354,De=T.a.cd671d58,He=T.a.df100d68,Ne=T.a.ebb2b7a5,Ve=T.a.b00da142,Ke=T.a.ebbba63e,Ge=T.a.f12ed169,ze={page:"search"},Ue=[{type:b.c.Top,label:Pe},{type:b.c.Live,label:Le},{type:b.c.User,label:Be},{type:b.c.Image,label:Re},{type:b.c.Video,label:He}],Qe=((Ae={})[b.c.Top]=Ne,Ae[b.c.Live]=Ne,Ae[b.c.User]=Ve,Ae[b.c.Image]=Ve,Ae[b.c.Video]=Ke,Ae),We=function(e){function t(t){var n;return n=e.call(this,t)||this,s()(a()(n),"_renderRightControl",function(e){var t=e.hasQuery,r=e.isTwoColumn,a=e.searchFocused;return!t||!r&&a?void 0:u.createElement(k.a,{onClick:n._handleOverflowMenuClick,renderMenu:n._renderMenu})}),s()(a()(n),"_renderMenu",function(e){var t=n.props,r=t.history,a=t.location,o=t.isQueryAlreadySaved,c=!!n.context.loggedInUserId;return u.createElement(he.a,null,function(t){var i=t.windowWidth,s=l.a.isTwoColumnLayout(i);return u.createElement($,{deleteSavedSearch:n._onDeleteSavedSearchMenuClick,history:r,isLoggedIn:c,isQueryAlreadySaved:o,isTwoColumn:s,location:a,onClose:e,saveSearch:n._onSaveSearch})})}),s()(a()(n),"_onSaveSearch",function(){var e=n.props,t=e.query,r=e.saveSearch,a=e.scribeAction,o=e.scribeNamespace;t&&r(t);var c=I.a.forSavedSearchResult(t);a(Object.assign({},o,{element:"saved_search",action:"add"}),{items:[c]})}),s()(a()(n),"_handleOnDeleteSavedSearchConfirm",function(){var e=n.props,t=e.deleteSavedSearch,r=e.query,a=e.savedSearches,o=e.scribeAction,c=e.scribeNamespace,i=a.find(function(e){return e.query===r});if(i){t(i.id_str);var s=I.a.forSavedSearchResult(i.query);o(Object.assign({},c,{element:"saved_search",action:"delete"}),{items:[s]}),n.setState({shouldShowDeleteSearchConfirmation:!1})}}),s()(a()(n),"_handleOnDeleteSavedSearchCancel",function(){n.setState({shouldShowDeleteSearchConfirmation:!1})}),s()(a()(n),"_onDeleteSavedSearchMenuClick",function(){n.setState({shouldShowDeleteSearchConfirmation:!0})}),s()(a()(n),"_handleOverflowMenuClick",function(){var e=n.props,t=e.scribeAction,r=e.scribeNamespace;t(Object.assign({},r,{element:"overflow_menu",action:"click"}))}),s()(a()(n),"_renderPrimaryContent",function(e){var t=n.state.shouldShowDeleteSearchConfirmation;return u.createElement(oe.a,null,u.createElement(Me,e),t?u.createElement(j.a,{onCancel:n._handleOnDeleteSavedSearchCancel,onConfirm:n._handleOnDeleteSavedSearchConfirm}):null)}),s()(a()(n),"_renderSidebarContent",function(){var e=n.props,t=e.history,r=e.location,a=e.query,o=e.scribeAction,c=e.scribeNamespace;return u.createElement(h.a,{withSearchBox:!1,withTrends:!!a},u.createElement(oe.a,null,u.createElement(le.a,{text:Ge}),u.createElement(P.a,{history:t,key:r.key,location:r,scribeAction:o,scribeNamespace:c})))}),s()(a()(n),"_getModeLinks",se()(a()(n),function(e){return e.query},function(e){return e.querySrc},function(e){return e.searchType},function(e){return e.searchFilters},function(e){return e.mode},function(e,t,r,a,o){return Ue.map(function(c){var i=b.f[c.type];return{link:Object(b.d)({query:e,querySrc:t,modeValue:i,searchType:r,searchFilters:a}),isActive:n._isActive(i,o),label:c.label}})})),s()(a()(n),"_setSearchBoxRef",function(e){n._searchBoxRef=e}),s()(a()(n),"_handleSoftLeftClick",function(){var e=F.a.findDOMNode(n._searchBoxRef);e&&e instanceof window.HTMLElement&&e.querySelector("input").focus()}),s()(a()(n),"_handleSearchBoxSubmit",function(){(0,n.props.scribeAction)(Object.assign({},ze,{section:"trendsplus",action:"search"}))}),n.state={shouldShowDeleteSearchConfirmation:!1},n}c()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.createLocalApiErrorHandler,n=e.fetchSavedSearchesIfNeeded;this._possiblyRedirectToExplore(this.props),n().catch(t({}))},n.UNSAFE_componentWillReceiveProps=function(e){this._possiblyRedirectToExplore(e)},n.render=function(){var e=this,t=this.props,n=t.location,r=t.searchFocused,a=t.query,o=t.querySrc,c=t.mode,i=t.searchFilters,s=t.history,h=!!a,p=h?Ie({query:a}):Fe,f={emptyResultsMessage:c?Qe[c]:Ne,history:s,location:n,query:a,querySrc:o,searchFilters:i,searchFocused:r},m={initialValue:a,mode:c,onSubmit:this._handleSearchBoxSubmit,searchFilters:i},v=this._renderPrimaryContent(f),y=a?{search_details:{query:a}}:{};return u.createElement(ce.c,{data:y},u.createElement(A.a,null,u.createElement(he.a,null,function(t){var o=t.windowWidth,c=l.a.isTwoColumnLayout(o),i=e._renderRightControl({hasQuery:h,isTwoColumn:c,searchFocused:r});return u.createElement(te.a,{backLocation:r||h?"/explore":null,composeOptions:xe(a),documentTitle:p,history:s,location:n,primaryContent:v,rightControl:i,searchBoxOptions:m,searchBoxRef:e._setSearchBoxRef,secondaryBar:e._renderModesBar(),sidebarContent:e._renderSidebarContent(),title:a,withSearchBox:!0,withTabBar:!r&&!h})}),u.createElement(d.a,null),re.a.isKaiOS()&&u.createElement(ne.a,{leftText:De,onLeftClick:this._handleSoftLeftClick})))},n._renderModesBar=function(){var e=!!this.props.query,t=!!this.context.loggedInUserId;return e&&t?u.createElement(ee.a,{navButtonStyle:Je.tabNavButton},this._getModeLinks().map(function(e){return u.createElement(ee.a.Link,{isActive:e.isActive,key:e.label,retainScrollPosition:!1,to:e.link},e.label)})):void 0},n._isActive=function(e,t){return function(){return t===e}},n._possiblyRedirectToExplore=function(e){var t=e.history;e.query||t.replace("/explore")},t}(u.Component);s()(We,"contextType",x.a);var Je=fe.a.create(function(e){return{tabNavButton:{backgroundColor:e.colors.navigationBackground}}});t.default=Object(ce.d)(ze)(q(We))},qrhJ:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n("M1I4"),a=n.n(r),o=n("86MP"),c=n.n(o),i=n("fKPv"),s=n.n(i),u=n("GiK3"),l=(n.n(u),n("3f1i")),d=n("A1lE"),h=n("bwKB"),p=function(e){function t(t,n){var r;r=e.call(this,t,n)||this,s()(a()(r),"_handleClose",function(){r.setState({showLoginPrompt:!1})});var o=!r.context.loggedInUserId&&l.a.hasValue("rweb_android_app_install_cta_v2_8497","app_install_once_per_week");return r.state={showLoginPrompt:o},r}return c()(t,e),t.prototype.render=function(){return this.state.showLoginPrompt?u.createElement(h.a,{isHalfSheet:!0,onClose:this._handleClose,onlyShowOnce:!0}):null},t}(u.Component);s()(p,"contextType",d.a)}});
//# sourceMappingURL=https://ton.smf1.twitter.com/responsive-web-internal/sourcemaps/web/bundle.Search.77d5dc9e35ed83884.js.map